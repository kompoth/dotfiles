#!/usr/bin/perl
use strict;
use warnings;

my $tex_file = $ARGV[0];
my %ci_hash;
my $ci_num = 0;

open(FILE, "<", $tex_file) or die "failed to open tex file";
while (<FILE>) {
  chomp;
  while (/cite\{([a-zA-Z0-9_,]+)\}/g) {
    my @matches = split(",", $1);
    foreach (@matches) {
      if (exists($ci_hash{$_})) {next;}
      $ci_hash{$_} = ++$ci_num;
    }
  }
}
close FILE;

foreach my $ci (sort {$ci_hash{$a} <=> $ci_hash{$b}} keys %ci_hash ) {
  print "$ci_hash{$ci}\t$ci\n";
}
